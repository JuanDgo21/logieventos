<div class="login-container">
  <div class="card">
    <div class="login-header">
      <i class="fas fa-calendar-check"></i>
      <h2>LogiEventos</h2>
      <p>Gestión profesional de eventos</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      @if (showAlert) {
        <div class="alert alert-{{alertType}}">
          <i [class]="'fas ' + getAlertIcon()"></i>
          <div class="alert-content">
            <strong>{{getAlertTitle()}}</strong>
            <p>{{alertMessage}}</p>
          </div>
          <button type="button" class="alert-close" (click)="showAlert = false">
            <i class="fas fa-times"></i>
          </button>
        </div>
      }

      <div class="input-field">
        <i class="fas fa-envelope"></i>
        <input 
          type="email" 
          formControlName="email"
          placeholder="Correo electrónico"
          [class.is-invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
      </div>
      
      @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
        <div class="text-danger">
          <i class="fas fa-exclamation-circle"></i>
          @if (loginForm.get('email')?.errors?.['required']) {
            <span>Campo requerido</span>
          }
          @if (loginForm.get('email')?.errors?.['email']) {
            <span>Formato de correo inválido</span>
          }
        </div>
      }

      <div class="input-field">
        <i class="fas fa-lock"></i>
        <input 
          type="{{passwordVisible ? 'text' : 'password'}}" 
          formControlName="password"
          placeholder="Contraseña"
          [class.is-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
        <i 
          class="fas {{passwordVisible ? 'fa-eye-slash' : 'fa-eye'}} toggle-password"
          (click)="togglePasswordVisibility()"></i>
      </div>
      
      @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
        <div class="text-danger">
          <i class="fas fa-exclamation-circle"></i>
          @if (loginForm.get('password')?.errors?.['required']) {
            <span>Contraseña requerida</span>
          }
          @if (loginForm.get('password')?.errors?.['minlength']) {
            <span>Mínimo 8 caracteres</span>
          }
          @if (loginForm.get('password')?.errors?.['pattern']) {
            <span>Mayúsculas, minúsculas y números</span>
          }
        </div>
      }

      <div class="form-actions">
        <button 
          type="button" 
          class="btn btn-text"
          (click)="navigateToForgotPassword()">
          <i class="fas fa-question-circle"></i>
          <span>¿Olvidaste tu contraseña?</span>
        </button>

        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="loginForm.invalid || isLoading">
          @if (isLoading) {
            <i class="fas fa-spinner fa-spin"></i>
          } @else {
            <i class="fas fa-sign-in-alt"></i>
          }
          <span>Iniciar sesión</span>
        </button>
      </div>
    </form>
  </div>
</div>
<!-- <div class="dashboard-layout"> -->
  <app-navbar></app-navbar>
  
  <div class="main-content-wrapper">
    <app-sidebar></app-sidebar>
    
    <main class="dashboard-content">
      <!-- Header del Dashboard -->
      <div class="dashboard-header">
        <div class="header-content">
          <h1><i class="fas fa-users me-2"></i> Gesti칩n de Usuarios</h1>
          <div class="header-actions">
            <button class="btn btn-primary" (click)="openUserForm()">
              <i class="fas fa-plus me-2"></i> Nuevo Usuario
            </button>
            <button class="btn btn-text ms-2" (click)="loadData()">
              <i class="fas fa-sync-alt"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="user-greeting">
        <h2>춰Hola Administrador! <span class="greeting-emoji">游녦</span></h2>
        <p class="daily-message">Panel de control administrativo</p>
      </div>

      <!-- Decoraciones -->
      <div class="dashboard-decorations">
        <div class="decoration particle-1"></div>
        <div class="decoration particle-2"></div>
        <div class="decoration particle-3"></div>
      </div>
      
      <!-- Tarjetas de Resumen -->
      <div class="summary-cards">
      <!-- Tarjeta de usuarios activos -->
      <div class="summary-card" [style.background]="getGradient('activeUsers')">
        <div class="card-content">
          <div class="card-icon">
            <i class="fas fa-user-check"></i>
          </div>
          <div class="card-info">
            <h3>{{ stats.activeUsers }}</h3>
            <p>Usuarios Activos</p>
            <div class="card-trend trend-up">
              <i class="fas fa-arrow-up"></i>
              <span>+{{ stats.activeUsers > 0 ? math.round(stats.activeUsers * 0.1) : 0 }} este mes</span>
            </div>
          </div>
            <div class="card-wave"></div>
          </div>
        </div>

        <div class="summary-card" [style.background]="getGradient('activePercentage')">
          <div class="card-content">
            <div class="card-icon">
              <i class="fas fa-percent"></i>
            </div>
            <div class="card-info">
              <h3>{{ stats.activePercentage }}%</h3>
              <p>Tasa de Actividad</p>
              <div class="card-trend" [ngClass]="{
                'trend-up': stats.activePercentage >= 70,
                'trend-warning': stats.activePercentage >= 30 && stats.activePercentage < 70,
                'trend-down': stats.activePercentage < 30
              }">
                <i [class]="stats.activePercentage >= 70 ? 'fas fa-arrow-up' : 
                           stats.activePercentage >= 30 ? 'fas fa-minus' : 'fas fa-arrow-down'"></i>
                <span>{{ stats.activePercentage >= 70 ? 'Excelente' : 
                       stats.activePercentage >= 30 ? 'Aceptable' : 'Baja' }}</span>
              </div>
            </div>
            <div class="card-wave"></div>
          </div>
        </div>

        <div class="summary-card" [style.background]="getGradient('totalUsers')">
          <div class="card-content">
            <div class="card-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="card-info">
              <h3>{{ stats.totalUsers }}</h3>
              <p>Total de Usuarios</p>
              <div class="card-trend">
                <i class="fas fa-user-plus"></i>
                <span>+{{ recentUsers.length }} nuevos</span>
              </div>
            </div>
            <div class="card-wave"></div>
          </div>
        </div>
      </div>

      <!-- Contenido Principal -->
      <div class="dashboard-main">
        <!-- Acciones R치pidas -->
        <div class="dashboard-section quick-actions-section">
          <div class="section-header">
            <h2><i class="fas fa-bolt me-2"></i> Acciones R치pidas</h2>
          </div>
          <div class="quick-actions-grid">
            <div class="quick-action" (click)="openUserForm()">
              <div class="action-content">
                <i class="fas fa-user-plus fa-2x mb-2"></i>
                <span class="fw-bold">Agregar Usuario</span>
                <small class="text-muted">Crear nuevo usuario</small>
              </div>
              <div class="action-wave"></div>
            </div>

            <div class="quick-action" [style.background]="getGradient('manageRoles')" (click)="openRoleManager()">
              <div class="action-content">
                <i class="fas fa-user-shield"></i>
                <span>Administrar Roles</span>
              </div>
              <div class="action-wave"></div>
            </div>

            <div class="quick-action" [style.background]="getGradient('viewReports')" (click)="viewReports()">
              <div class="action-content">
                <i class="fas fa-chart-bar"></i>
                <span>Ver Reportes</span>
              </div>
              <div class="action-wave"></div>
            </div>
          </div>
        </div>

        <!-- Actividad Reciente -->
        <div class="dashboard-section recent-activity">
          <div class="section-header">
            <h2><i class="fas fa-history"></i> 칔ltimos Usuarios</h2>
            <a href="#" class="view-all">Ver todo <i class="fas fa-chevron-right"></i></a>
          </div>
          <div class="activity-list">
            <div *ngFor="let user of recentUsers" class="activity-item">
              <div class="activity-icon" [style.background]="getUserRoleColor(user.role)">
                <i [class]="getUserRoleIcon(user.role)"></i>
              </div>
              <div class="activity-details">
                <p>{{ user.fullname }} <span class="badge" [ngClass]="getUserRoleBadge(user.role)">{{ user.role | titlecase }}</span></p>
                <small>Registrado el {{ formatDate(user.createdAt) }}</small>
                <div class="user-status" [ngClass]="{'active': user.active, 'inactive': !user.active}">
                  {{ user.active ? 'Activo' : 'Inactivo' }}
                </div>
              </div>
            </div>
            <div *ngIf="recentUsers.length === 0" class="activity-item empty-state">
              <div class="activity-icon" style="background: rgba(255,255,255,0.1)">
                <i class="fas fa-users-slash"></i>
              </div>
              <div class="activity-details">
                <p>No hay usuarios recientes</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Distribuci칩n de Roles -->
      <div class="dashboard-section role-distribution">
        <div class="section-header">
          <h2><i class="fas fa-chart-pie"></i> Distribuci칩n de Roles</h2>
        </div>
        <div class="distribution-chart">
          <div *ngFor="let role of roleDistribution.labels; let i = index" class="role-item">
            <div class="role-info">
              <div class="role-color" [style.background]="getRoleColor(role)"></div>
              <span class="role-name">{{ role }}</span>
              <span class="role-count">{{ roleDistribution.data[i] }} ({{ calculatePercentage(roleDistribution.data[i]) | number:'1.0-0' }}%)</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar" [style.width]="calculatePercentage(roleDistribution.data[i]) + '%'" 
                   [style.background]="getRoleColor(role)"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Herramientas de Administrador -->
      <div *ngIf="userRole === 'admin'" class="dashboard-section admin-tools">
        <div class="section-header">
          <h2><i class="fas fa-shield-alt"></i> Herramientas de Administrador</h2>
        </div>
        <div class="tools-content">
          <div class="system-health">
            <h5>Estado del Sistema</h5>
            <div class="health-status" [ngClass]="{
              'healthy': stats.totalUsers > 0,
              'warning': stats.totalUsers === 0
            }">
              <span>{{ stats.totalUsers > 0 ? 'Estable' : 'Sin usuarios' }}</span>
              <div class="health-bar">
                <div class="health-progress" [style.width]="stats.totalUsers > 0 ? '95%' : '10%'"></div>
              </div>
            </div>
          </div>
          <div class="admin-buttons">
            <button class="admin-btn primary" (click)="openUserForm()">
              <i class="fas fa-user-plus"></i> Nuevo Usuario
            </button>
            <button class="admin-btn success" (click)="openRoleManager()">
              <i class="fas fa-user-shield"></i> Gestionar Roles
            </button>
            <button class="admin-btn danger" (click)="viewReports()">
              <i class="fas fa-chart-bar"></i> Ver Reportes
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <app-footer></app-footer>
<!-- </div> -->